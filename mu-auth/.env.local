# Base de données PostgreSQL
POSTGRES_DATABASE_URL="postgresql://keycloak:keycloak@localhost:5432/mu_auth?schema=public"
SKIP_DB=false

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_PREFIX=mu:auth:

# Keycloak
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=mu-realm
KEYCLOAK_CLIENT_ID=mu-client
KEYCLOAK_CLIENT_SECRET=C6wUxtvzdLKJSuEWiRGyr4aNOOx6OnNX
KEYCLOAK_ADMIN_CLIENT_ID=mu-client
KEYCLOAK_ADMIN_CLIENT_SECRET=C6wUxtvzdLKJSuEWiRGyr4aNOOx6OnNX

# Application Auth
APP_AUTH_ENABLED=true
VALID_APP_IDS=f2655ffda8594852,f2655ffda8594853,app3
APP_TOKEN_EXPIRY=3600
APP_REFRESH_TOKEN_EXPIRY=86400

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=keycloak
POSTGRES_USER=keycloak
POSTGRES_PASSWORD=keycloak

# Synchronization
ENABLE_AUTO_SYNC=false
SYNC_INTERVAL_HOURS=1

# Auth Configuration
ENABLE_AUTH_CACHE=true
AUTH_CACHE_EXPIRY=3600
ENABLE_AUTH_LOGGING=true
ENABLE_SESSION_TRACKING=true

# OPA
OPA_URL=http://localhost:8181
OPA_POLICY_PATH=/v1/data/authz/decision

PORT=3001
NODE_ENV=development
AUTHORIZATION_GRPC_URL=0.0.0.0:50050
AUTHENTICATION_GRPC_URL=0.0.0.0:50051

MFA_ENABLED=true
MFA_ENFORCED_ROLES=admin,super_admin
MFA_GRACE_PERIOD_DAYS=7
MFA_MAX_ATTEMPTS=3
MFA_CODE_LENGTH=6
MFA_CODE_EXPIRY=300
MFA_ALLOWED_METHODS=totp,sms,email,backup_codes
MFA_REQUIRE_BACKUP_CODES=true
MFA_REMEMBER_DEVICE_DAYS=30

DEVICE_TRUST_ENABLED=true

# ✅ CORRECTION PRINCIPALE: Configuration Mailjet
EMAIL_PROVIDER=mailjet
MAILJET_API_KEY=9f9407158854c43269491c424a3df4f7
MAILJET_API_SECRET=a0d7e5c8275f4634a33dacb93ea1c9f3
MAILJET_FROM_EMAIL=marcfotso20@gmail.com
MAILJET_FROM_NAME=SMP Platform

# Templates Mailjet (optionnels pour l'instant)
MAILJET_TEMPLATE_MAGIC_LINK=
MAILJET_TEMPLATE_WELCOME=
MAILJET_TEMPLATE_PASSWORD_RESET=
MAILJET_TEMPLATE_MFA_CODE=

# Configuration email générale
FROM_NAME=SMP Platform

# Timeouts et retry
MAILJET_TIMEOUT=60000
MAILJET_RETRY_ATTEMPTS=3
MAILJET_RETRY_DELAY=2000

# Magic Link Configuration
MAGIC_LINK_ENABLED=true
MAGIC_LINK_TOKEN_LENGTH=32
MAGIC_LINK_EXPIRY_MINUTES=30
MAGIC_LINK_MAX_USES_PER_DAY=100
MAGIC_LINK_REQUIRE_EXISTING_USER=false
MAGIC_LINK_AUTO_CREATE_USER=true

# Frontend Configuration
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:3001/graphql
MAGIC_LINK_PATH=/auth/magic-link

# Redirections
REDIRECT_LOGIN=http://localhost:3002/account
REDIRECT_REGISTER=/welcome
REDIRECT_RESET_PASSWORD=/auth/password-reset
REDIRECT_VERIFY_EMAIL=/auth/email-verified


# =============================================================================
# CONFIGURATION OAUTH GOOGLE
# =============================================================================

# Activer/désactiver Google OAuth
GOOGLE_OAUTH_ENABLED=true

# Credentials Google (depuis Google Cloud Console)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# URL de redirection (doit être configurée dans Google Cloud Console)
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/callback/google

# Scopes demandés (séparés par des virgules)
GOOGLE_SCOPES=openid,email,profile

# Domaine G Suite (optionnel - pour restreindre à un domaine spécifique)
# GOOGLE_HOSTED_DOMAIN=votre-entreprise.com

# =============================================================================
# CONFIGURATION OAUTH GITHUB
# =============================================================================

# Activer/désactiver GitHub OAuth
GITHUB_OAUTH_ENABLED=true

# Credentials GitHub (depuis GitHub Developer Settings)
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret

# URL de redirection (doit être configurée dans GitHub OAuth App)
GITHUB_REDIRECT_URI=http://localhost:3000/auth/callback/github

# Scopes demandés (séparés par des virgules)
GITHUB_SCOPES=user:email,read:user

# Autoriser l'inscription via GitHub
GITHUB_ALLOW_SIGNUP=true

# Organisation GitHub requise (optionnel)
# GITHUB_ORGANIZATION_ID=your-organization-name

# Équipe GitHub requise (optionnel)
# GITHUB_TEAM_ID=your-team-id

# =============================================================================
# CONFIGURATION OAUTH GÉNÉRALE
# =============================================================================

# URL du frontend pour les redirections
FRONTEND_URL=http://localhost:3000

# URL de l'API pour les callbacks
API_URL=http://localhost:3001

# Rôles par défaut assignés aux nouveaux utilisateurs OAuth
OAUTH_DEFAULT_ROLES=USER

# Créer automatiquement les utilisateurs OAuth
OAUTH_AUTO_CREATE_USER=true

# =============================================================================
# URLS DE REDIRECTION POUR PRODUCTION
# =============================================================================

# Production URLs (à adapter selon votre domaine)
# GOOGLE_REDIRECT_URI=https://your-domain.com/auth/callback/google
# GITHUB_REDIRECT_URI=https://your-domain.com/auth/callback/github
# FRONTEND_URL=https://your-domain.com
# API_URL=https://api.your-domain.com
